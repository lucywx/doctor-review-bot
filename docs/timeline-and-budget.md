# 开发时间表与成本预算

## 1. 项目时间规划

### 1.1 总体时间估算

**AI 辅助开发模式：2-3 天上线 MVP**

---

### 1.2 详细时间表

#### 📅 Day 1（6-8 小时）：基础设施搭建

| 时间段 | 任务 | 预计时间 | 工具/方法 |
|--------|------|----------|-----------|
| 上午 | **API 注册与配置**<br>- WhatsApp Business API<br>- Google Cloud (Places API)<br>- OpenAI API<br>- Facebook Graph API | 2-3h | Web 界面操作 |
| 下午 | **项目初始化**<br>- 创建 Git 仓库<br>- 搭建 FastAPI 框架<br>- 配置环境变量<br>- Docker 配置 | 2-3h | AI 生成代码模板 |
| 晚上 | **数据库设计**<br>- PostgreSQL 安装<br>- 创建表结构<br>- 测试连接 | 2h | 执行 SQL 脚本 |

**交付物**：
- ✅ 所有 API 密钥已获取
- ✅ 项目框架运行成功
- ✅ 数据库表创建完成

---

#### 📅 Day 2（6-8 小时）：核心功能开发

| 时间段 | 任务 | 预计时间 | AI 辅助 |
|--------|------|----------|---------|
| 上午 | **WhatsApp 集成**<br>- Webhook 接收<br>- 消息发送<br>- 格式化输出 | 2-3h | AI 生成 webhook 代码 |
| 下午 | **搜索引擎集成**<br>- Google Places API<br>- Facebook Graph API<br>- 并行搜索逻辑 | 3-4h | AI 生成 API 调用代码 |
| 晚上 | **缓存机制**<br>- 查询缓存逻辑<br>- 写入缓存<br>- 去重策略 | 1-2h | AI 优化 SQL 查询 |

**交付物**：
- ✅ WhatsApp 可接收/发送消息
- ✅ 能搜索并返回 Google Maps 评价
- ✅ 缓存系统运行正常

---

#### 📅 Day 3（4-6 小时）：AI 分析与优化

| 时间段 | 任务 | 预计时间 | 工具 |
|--------|------|----------|------|
| 上午 | **OpenAI 情感分析**<br>- Prompt 设计<br>- 批量分类<br>- 结果解析 | 2-3h | GPT-4 API |
| 下午 | **测试与调试**<br>- 端到端测试<br>- 错误处理<br>- 性能优化 | 2-3h | Pytest + 手动测试 |

**交付物**：
- ✅ 评价能准确分为正面/负面
- ✅ 所有功能测试通过

---

#### 📅 Day 4（3-4 小时）：部署上线

| 时间段 | 任务 | 预计时间 | 平台 |
|--------|------|----------|------|
| 上午 | **部署到云平台**<br>- Railway/Render 配置<br>- 环境变量设置<br>- 数据库迁移 | 1-2h | Railway |
| 下午 | **生产环境测试**<br>- Webhook 连通性<br>- 真实用户测试<br>- 性能监控 | 1-2h | WhatsApp 测试号码 |

**交付物**：
- ✅ Bot 在生产环境运行
- ✅ 30 名用户可正常使用

---

### 1.3 甘特图

```
Week 1
Mon     Tue     Wed     Thu     Fri
[Day1]  [Day2]  [Day3]  [Day4]  [缓冲]
 API     核心    AI分析   部署    优化
 配置    功能    +测试   上线    修复
```

---

## 2. 成本预算详解

### 2.1 开发阶段成本（一次性）

| 项目 | 费用 | 说明 |
|------|------|------|
| **人力成本** | $0 | 自己开发 + AI 辅助 |
| **域名（可选）** | $10-15/年 | 如 doctor-review.com |
| **其他工具** | $0 | 使用免费工具 |
| **总计** | **$0-15** | 几乎零成本启动 |

---

### 2.2 月度运营成本（详细拆解）

#### 场景 1：初期阶段（30 用户，1,500 次/月）

| 服务 | 用量 | 单价 | 月费用 | 备注 |
|------|------|------|--------|------|
| **WhatsApp Business API** | 1,500 条消息 | 前 1,000 免费 | $0 | 免费额度内 |
| **Google Places API** | 1,500 次搜索 | $200 免费额度 | $0 | 免费额度充足 |
| **Facebook Graph API** | 1,500 次调用 | 免费 | $0 | 公开内容免费 |
| **OpenAI API (GPT-4-turbo)** | ~150K tokens | $10/1M input | $3-5 | 情感分析 |
| **PostgreSQL 数据库** | 1GB 存储 | Railway 免费 | $0 | 免费层够用 |
| **云服务器（Railway）** | 小实例 | $5 免费额度 | $0 | 免费层 |
| **监控工具（可选）** | 基础版 | Sentry 免费 | $0 | 可选 |
| **总计** | - | - | **$3-5/月** | 🎯 极低成本 |

**实际成本可能更低**：
- 如果使用 GPT-3.5-turbo：**$0.5-1/月**
- 如果缓存命中率 70%：API 调用减少 **30%**

---

#### 场景 2：增长期（100 用户，5,000 次/月）

| 服务 | 用量 | 月费用 | 说明 |
|------|------|--------|------|
| WhatsApp | 5,000 条 | $0-20 | 部分超出免费 |
| Google Places | 5,000 次 | $0 | 仍在免费额度 |
| Facebook | 5,000 次 | $0 | 免费 |
| OpenAI | ~500K tokens | $10-15 | GPT-4-turbo |
| Database | 5GB | $0-5 | 可能需付费层 |
| Server | 中实例 | $10-15 | 超出免费层 |
| **总计** | - | **$20-55/月** | |

---

#### 场景 3：规模化（1,000 用户，50,000 次/月）

| 服务 | 月费用 | 优化方案 |
|------|--------|----------|
| WhatsApp | $200-250 | 考虑批量折扣 |
| Google Places | $50-100 | 使用缓存降低 |
| OpenAI | $100-150 | 切换到 GPT-3.5 |
| Database | $25-50 | 专业托管 |
| Server | $50-100 | 多实例负载均衡 |
| **总计** | **$425-650/月** | |

---

### 2.3 成本优化策略

#### 策略 1：缓存优化（降低 60-70% API 成本）

```python
# 热门医生 7 天缓存
# 预计缓存命中率：60-70%
# 实际 API 调用：1,500 × 30% = 450 次/月
# 成本降低：$15 → $5
```

#### 策略 2：使用更便宜的模型

| 模型 | 成本 | 准确率 | 推荐场景 |
|------|------|--------|----------|
| GPT-4-turbo | $3-5/月 | 95% | 初期测试 |
| GPT-3.5-turbo | $0.5-1/月 | 85% | 成本敏感 |
| Claude Haiku | $1-2/月 | 90% | 性价比高 |

#### 策略 3：限流控制

```python
# 每用户每日限制 5 次查询
# 恶意请求自动拦截
# 成本可控：$3-5/月
```

---

### 2.4 12 个月成本预测

```
Month 1-3:   $3-5/月    (30 用户，测试期)
Month 4-6:   $10-20/月  (50 用户，稳定增长)
Month 7-9:   $30-50/月  (100 用户，口碑传播)
Month 10-12: $50-100/月 (200 用户，规模化)

第一年总成本预估：$300-600
```

---

## 3. 投资回报率（ROI）分析

### 3.1 如果收费模式

假设向用户收费：

| 方案 | 定价 | 用户数 | 月收入 | 月成本 | 净利润 |
|------|------|--------|--------|--------|--------|
| 免费 + 捐赠 | $0-5 | 30 | $0-50 | $3-5 | -$3 到 $47 |
| 订阅制 | $2/月 | 30 | $60 | $3-5 | $55-57 |
| 按次付费 | $0.1/次 | 30 用户<br>1,500 次 | $150 | $3-5 | $145-147 |

**结论**：
- 即使免费运营，成本也仅 **$3-5/月**
- 如果 20% 用户付费 $2/月，可实现盈利

---

### 3.2 隐性价值

| 价值点 | 估值 |
|--------|------|
| **学习经验** | AI 编程、API 集成经验 |
| **作品集展示** | 完整的全栈项目 |
| **用户反馈** | 真实用户使用数据 |
| **技术积累** | 可复用到其他项目 |

---

## 4. 风险与应对

### 4.1 成本风险

| 风险 | 概率 | 影响 | 应对 |
|------|------|------|------|
| API 调用超预期 | 中 | $50-100 额外成本 | 设置每日配额限制 |
| 恶意滥用 | 低 | $100+ | IP 黑名单 + 验证码 |
| 数据库爆增 | 低 | $20-50 | 定期清理过期数据 |

### 4.2 时间风险

| 风险 | 应对 |
|------|------|
| API 申请延迟（WhatsApp 审核可能 1-2 周） | 提前申请，先用测试号 |
| 技术难点卡壳 | 使用 AI 辅助快速解决 |
| 部署问题 | 使用 Railway 一键部署 |

---

## 5. 里程碑与验收标准

### Milestone 1：Day 1 完成
- [ ] 所有 API 密钥获取成功
- [ ] 本地环境运行成功
- [ ] 数据库连接测试通过

### Milestone 2：Day 2 完成
- [ ] WhatsApp 能收发消息
- [ ] Google Maps 数据能正常抓取
- [ ] 缓存写入/读取正常

### Milestone 3：Day 3 完成
- [ ] AI 情感分析准确率 > 80%
- [ ] 端到端测试通过
- [ ] 响应时间 < 10s

### Milestone 4：Day 4 完成
- [ ] 生产环境部署成功
- [ ] Webhook 连通性测试通过
- [ ] 3 名真实用户测试通过

---

## 6. 资源清单

### 6.1 必需账号

- [x] GitHub 账号（代码托管）
- [x] Meta for Developers（WhatsApp API）
- [x] Google Cloud（Places API）
- [x] OpenAI（GPT API）
- [x] Railway/Render（部署平台）

### 6.2 可选工具

- [ ] Sentry（错误监控）
- [ ] Logtail（日志聚合）
- [ ] Postman（API 测试）
- [ ] TablePlus（数据库管理）

---

## 7. 快速启动检查清单

### 开发前准备（Day 0）
- [ ] 创建所有必需账号
- [ ] 申请 WhatsApp Business API（可能需要 1-2 周）
- [ ] 获取 Google Places API Key
- [ ] 获取 OpenAI API Key
- [ ] 准备测试手机号

### Day 1 开始
- [ ] Fork 项目模板（如有）
- [ ] 配置 `.env` 文件
- [ ] 运行 `docker-compose up`
- [ ] 初始化数据库

### Day 2-3 开发
- [ ] 逐个模块开发测试
- [ ] 使用 AI 辅助生成代码
- [ ] 每小时 Git commit

### Day 4 上线
- [ ] 部署到 Railway
- [ ] 配置 Webhook
- [ ] 邀请测试用户

---

## 8. 总结

### 时间成本
- **最快**：2 天（16 小时密集开发）
- **推荐**：3 天（每天 4-6 小时）
- **保守**：4-5 天（包含缓冲时间）

### 金钱成本
- **开发阶段**：$0-15（几乎零成本）
- **运营成本**：$3-5/月（30 用户）
- **扩展成本**：$20-100/月（100-1000 用户）

### 性价比
⭐⭐⭐⭐⭐ **极高**
- AI 辅助开发大幅降低时间成本
- 缓存机制大幅降低运营成本
- 技术栈成熟，风险可控

---

**准备好开始了吗？** 🚀

只需 2-3 天，你就能拥有一个完全属于自己的 WhatsApp 智能医生评价机器人！
